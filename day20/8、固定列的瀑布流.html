<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css" media="screen">
		*{padding:0px;margin:0px;}
		ul{list-style: none; width: 1200px; margin: 0 auto;}
		li{float: left;width: 230px; margin: 5px;}
	</style>
</head>
<body>
	<ul>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
		<li></li>
	</ul>
	<script type="text/javascript">
		var oUl=document.getElementsByTagName('ul')[0];
		var aLi=oUl.getElementsByTagName('li');
		var arr=[
					{"src":"img1/1.jpg","alt":"1","height":"343px"},
					{"src":"img1/2.jpg","alt":"2","height":"300px"},
					{"src":"img1/3.jpg","alt":"3","height":"230px"},
					{"src":"img1/4.jpg","alt":"4","height":"230px"},
					{"src":"img1/5.jpg","alt":"5","height":"306px"},
					{"src":"img1/6.jpg","alt":"6","height":"333px"},
					{"src":"img1/7.jpg","alt":"7","height":"335px"},
					{"src":"img1/8.jpg","alt":"8","height":"172px"},
					{"src":"img1/9.jpg","alt":"9","height":"172px"},
					{"src":"img1/10.jpg","alt":"10","height":"345px"},
					{"src":"img1/11.jpg","alt":"11","height":"340px"},
					{"src":"img1/12.jpg","alt":"12","height":"153px"},
					{"src":"img1/13.jpg","alt":"13","height":"345px"},
					{"src":"img1/14.jpg","alt":"14","height":"316px"},
					{"src":"img1/15.jpg","alt":"15","height":"327px"},
					{"src":"img1/16.jpg","alt":"16","height":"345px"},
					{"src":"img1/17.jpg","alt":"17","height":"172px"},
					{"src":"img1/18.jpg","alt":"18","height":"282px"},
					{"src":"img1/19.jpg","alt":"19","height":"224px"},
					{"src":"img1/20.jpg","alt":"20","height":"344px"}
			];
		//li高度最小的盒子插入图片
		
		function getMinIndex(obj){//获取高度最小li的索引。
			var minindex=0;
			var minvalue=obj[minindex].offsetHeight;
			for(var i=0;i<obj.length;i++){
				if(obj[i].offsetHeight<minvalue){
					minvalue=obj[i].offsetHeight;
					minindex=i;
				}
			}
			return minindex;
		}
		init();
		
		function init(){
			for(var i=0;i<arr.length;i++){
				var cdiv=document.createElement('div');
				var cimg=document.createElement('img');
				cimg.src=arr[i].src;
				cimg.alt=arr[i].alt;
				cimg.style.height=arr[i].height;
				cimg.style.width='230px';
				cdiv.appendChild(cimg);
				aLi[getMinIndex(aLi)].appendChild(cdiv);
			}
		}

		window.onscroll=function(){
			var minHeight=aLi[getMinIndex(aLi)].offsetHeight+50;
			var scrolltop=document.documentElement.scrolltop||document.body.scrollTop;
			var clientHeight=document.documentElement.clientHeight;
			if(minHeight<scrolltop+clientHeight){
				//如果aLi最小的高度小于滚动条的距离+可视区的高度，开始加载。
				init();

			}
		}

	</script>
</body>
</html>