<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			.div1{
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
				left:0px;top:0px;
				overflow: hidden;
				cursor: move;
			}
		</style>
	</head>
	<body>
		dafdsafdsafdsafdafdsafdsafdsafdafdsafdsafdsafdafdsafdsafdsafdafdsafdsafdsaf
		<div class="div1"></div>
		<script type="text/javascript">
			var oDiv=document.getElementsByTagName('div')[0];
			var shortx=0;
			var shorty=0;
			//必须对oDiv进行鼠标按下。
			oDiv.onmousedown=function(ev){
				var ev=ev||window.event;
				//1、求短线
				shortx=ev.offsetX;
				shorty=ev.offsetY;
				//2、鼠标移动
				document.onmousemove=function(ev){
					var ev=ev||window.event;
					var l=ev.clientX-shortx
					var t=ev.clientY-shorty
					if(l<0){
						l=0;
					}else if(l>=document.documentElement.clientWidth-oDiv.offsetWidth){
						l=document.documentElement.clientWidth-oDiv.offsetWidth;
					}
					
					if(t<0){
						t=0;
					}else if(t>=document.documentElement.clientHeight-oDiv.offsetHeight){
						t=document.documentElement.clientHeight-oDiv.offsetHeight;
					}
					oDiv.style.left=l+'px';
					oDiv.style.top=t+'px';
				}
				//3、释放move事件，同时拖拽结束。
				document.onmouseup=function(){
					document.onmousemove=null;
					document.onmouseup=null;
				}
				return false;//取消浏览器的默认事件
			}
		</script>
	</body>
</html>
